<!DOCTYPE html>
<html>
<head>
    <title>–ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä –∫–ª—é—á–µ–π</title>
    <style>
        body { font-family: Arial, sans-serif; text-align: center; padding: 50px; background: #f0f0f0; }
        .container { background: white; padding: 30px; border-radius: 10px; display: inline-block; box-shadow: 0 0 10px rgba(0,0,0,0.1); }
        button { padding: 12px 24px; font-size: 16px; background: #4CAF50; color: white; border: none; border-radius: 5px; cursor: pointer; margin: 10px; }
        button:disabled { background: #cccccc; cursor: not-allowed; }
        #key { font-weight: bold; margin: 20px; padding: 15px; background: #e9e9e9; border-radius: 5px; word-break: break-all; }
        .error { color: red; }
        .success { color: green; }
    </style>
</head>
<body>
    <div class="container">
        <h1>üîë –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä –∫–ª—é—á–µ–π</h1>
        <p>–ö–ª—é—á –¥–µ–π—Å—Ç–≤—É–µ—Ç 24 —á–∞—Å–∞ –∏ –º–æ–∂–µ—Ç –±—ã—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —Ä–∞–∑</p>
        <button onclick="generateKey()" id="generateBtn">–ü–æ–ª—É—á–∏—Ç—å –∫–ª—é—á</button>
        <div id="status"></div>
        <div id="key"></div>
    </div>

    <script>
        const GITHUB_USER = 'egor2078f';
        const REPO_NAME = 'Key';
        const API_TOKEN = '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';

        async function generateKey() {
            const btn = document.getElementById('generateBtn');
            const status = document.getElementById('status');
            const keyDisplay = document.getElementById('key');
            
            btn.disabled = true;
            status.innerHTML = '<div class="success">–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–ª—é—á–∞...</div>';
            keyDisplay.innerHTML = '';

            try {
                const key = 'KEY_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9).toUpperCase();
                
                const response = await fetch(`https://api.github.com/repos/${GITHUB_USER}/${REPO_NAME}/issues`, {
                    method: 'POST',
                    headers: {
                        'Authorization': `token ${API_TOKEN}`,
                        'Accept': 'application/vnd.github.v3+json',
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        title: key,
                        body: `–í—Ä–µ–º—è —Å–æ–∑–¥–∞–Ω–∏—è: ${new Date().toISOString()}\n–°—Ç–∞—Ç—É—Å: –∞–∫—Ç–∏–≤–µ–Ω`,
                        labels: ['key-active']
                    })
                });

                if (!response.ok) {
                    throw new Error('–û—à–∏–±–∫–∞ GitHub API: ' + response.status);
                }

                const data = await response.json();
                const userKey = key.replace('KEY_', '');
                keyDisplay.innerHTML = `–í–∞—à –∫–ª—é—á: <br><strong>${userKey}</strong>`;
                status.innerHTML = '<div class="success">‚úÖ –ö–ª—é—á —É—Å–ø–µ—à–Ω–æ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω!</div>';
                
                navigator.clipboard.writeText(userKey).then(() => {
                    setTimeout(() => {
                        alert('–ö–ª—é—á —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω –≤ –±—É—Ñ–µ—Ä –æ–±–º–µ–Ω–∞!');
                    }, 100);
                });

            } catch (error) {
                console.error('–û—à–∏–±–∫–∞:', error);
                status.innerHTML = '<div class="error">‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∫–ª—é—á–∞: ' + error.message + '</div>';
            } finally {
                btn.disabled = false;
            }
        }
    </script>
</body>
</html>
